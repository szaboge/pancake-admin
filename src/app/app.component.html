<div class="main">
  <div class="main-content">
    <h2>Rendelések</h2>
    <div class="statistics">
      <mat-chip-list>
        <mat-chip>
          Összes: {{all}}
        </mat-chip>
        <mat-chip class="done-chip">
          Kész: {{donee}}
        </mat-chip>
        <mat-chip class="inprogress-chip">
          Folyamatban: {{inprogress}}
        </mat-chip>
      </mat-chip-list>
    </div>
    <mat-accordion [multi]="true">
      <mat-expansion-panel *ngFor="let item of reservations | keyvalue;let i = index" [ngClass]="
      {
      'done-class':  item.value.done,
      'in-progress-class':  !item.value.done
      }">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <div class="title-content">
              <div class="title-name">{{i+1}}. {{item.value.name}} - {{item.value.room}}</div>
              <div class="indicator">
                <div class="db-container">
                  <span>
                    {{count(item.value.pancakes)}} db
                  </span>
                </div>
                <span *ngIf="item.value.done" class="mdi mdi-check-circle done"></span>
                <span *ngIf="!item.value.done" class="mdi mdi-sync inprogress"></span>
              </div>
            </div>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="time">{{item.value.time}}</div>
        <mat-divider></mat-divider>
        <div class="pancakes">
          <mat-chip-list>
            <mat-chip *ngFor="let pancake of item.value.pancakes">
              {{pancake.name}}: {{pancake.piece}} db
            </mat-chip>
          </mat-chip-list>
        </div>
        <mat-divider></mat-divider>
        <div class="action-button-container">
          <button *ngIf="!item.value.done" class="done-button" mat-raised-button color="primary" type="button"
                  (click)="done(item.key)">
            Kész
          </button>
          <button *ngIf="item.value.done" mat-raised-button color="warn" class="inprogress-button" type="button"
                  (click)="notdone(item.key)">
            Visszaállítás
          </button>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
    <mat-card *ngIf="!reservations" class="card">
      Nincs aktív rendelés
    </mat-card>
  </div>
</div>
